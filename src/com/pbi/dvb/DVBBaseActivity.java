/* * File Name:  DVBBaseActivity.java * Copyright:  Beijing Jaeger Communication Electronic Technology Co., Ltd. Copyright YYYY-YYYY,  All rights reserved * Descriptions:  <Descriptions> * Changed By:   * Changed Time:  2014-3-3 * Changed Content:  <Changed Content> */package com.pbi.dvb;import com.pbi.dvb.global.Config;import com.pbi.dvb.utils.CommonUtils;import com.pbi.dvb.utils.DialogUtils;import com.pbi.dvb.utils.LogUtils;import android.app.Activity;import android.app.Dialog;import android.content.Intent;import android.os.Bundle;import android.provider.Settings.SettingNotFoundException;import android.view.KeyEvent;import android.view.View;import android.view.View.OnClickListener;import android.widget.Toast;/** * <Functional overview> <Functional Details> *  * @author * @version [Version Number, 2014-3-3] * @see [Relevant Class/Method] * @since [Product/Module Version] */public class DVBBaseActivity extends Activity{    private static final String TAG = "DVBBaseActivity";        private int startStatus; // 0 close,1 open        private Dialog searchDialog;        @Override    protected void onStart()    {        super.onStart();        try        {            startStatus = android.provider.Settings.System.getInt(getContentResolver(), "boot_default_channel_open");        }        catch (SettingNotFoundException e)        {            startStatus = 0;            e.printStackTrace();        }            }        @Override    public boolean onKeyDown(int keyCode, KeyEvent event)    {        switch (keyCode)        {            case Config.KEY_SEARCH:                LogUtils.printLog(1, 3, TAG, "--->>> DVBBaseActivity press search key.");                if (startStatus == 1)                {                    Toast.makeText(this, getString(R.string.bdc_search_forbid), 1).show();                    return false;                }                if (null != searchDialog && searchDialog.isShowing())                {                    return false;                }                fastAutoSearch();                break;        }        return super.onKeyDown(keyCode, event);    }        private void fastAutoSearch()    {        if (null == searchDialog)        {            searchDialog =                DialogUtils.twoButtonsDialogCreate(DVBBaseActivity.this,                    getString(R.string.auto_search_or_not),                    new OnClickListener()                    {                        @Override                        public void onClick(View v)                        {                            if (null != searchDialog)                            {                                searchDialog.dismiss();                            }                            Bundle bundle = new Bundle();                            bundle.putInt("SearchMode", Config.Install_Search_Type_eAUTO_SEARCH);                            CommonUtils.skipActivity(DVBBaseActivity.this,                                ChannelSearchProgress.class,                                bundle,                                Intent.FLAG_ACTIVITY_CLEAR_TOP);                        }                    }, new OnClickListener()                    {                        @Override                        public void onClick(View v)                        {                            if (null != searchDialog)                            {                                searchDialog.dismiss();                            }                            CommonUtils.setLeftRightFunction(Config.SWITCH_TO_VOICE_CONTROL);                            searchDialog = null;                        }                    });        }    }    }