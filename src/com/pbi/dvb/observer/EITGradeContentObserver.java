/* * File Name:  EITGradeContentProvider.java * Copyright:  Beijing Jaeger Communication Electronic Technology Co., Ltd. Copyright YYYY-YYYY,  All rights reserved * Descriptions:  <Descriptions> * Changed By:   * Changed Time:  2014-1-26 * Changed Content:  <Changed Content> */package com.pbi.dvb.observer;import android.content.Context;import android.database.ContentObserver;import android.os.Handler;import android.provider.Settings;import android.provider.Settings.SettingNotFoundException;import android.util.Log;/** * <Functional overview> <Functional Details> *  * @author * @version [Version Number, 2014-1-26] * @see [Relevant Class/Method] * @since [Product/Module Version] */public class EITGradeContentObserver extends ContentObserver{        private static String TAG = "EITGradeContentProvider";        private Context mContext;        private Handler mHandler;        public EITGradeContentObserver(Context context, Handler handler)    {        super(handler);        mContext = context;        mHandler = handler;    }        @Override    public void onChange(boolean selfChange)    {        Log.i(TAG, "--->>>the dvb_grade value has changed.");        try        {            int dvb_grade = Settings.System.getInt(mContext.getContentResolver(), "dvb_grade");            Log.i(TAG, " dvb_grade -----> " + dvb_grade);            updateEitGrade();        }        catch (SettingNotFoundException e)        {            e.printStackTrace();        }            }        private void updateEitGrade()    {        int dvbGrade = 0;        int eitGrade = 1;        try        {            dvbGrade = android.provider.Settings.System.getInt(mContext.getContentResolver(), "dvb_grade");            eitGrade = android.provider.Settings.System.getInt(mContext.getContentResolver(), "eit_grade");        }        catch (SettingNotFoundException e)        {            // set eit grade equals default value.            android.provider.Settings.System.putInt(mContext.getContentResolver(), "eit_grade", 1);            e.printStackTrace();        }        if (dvbGrade == eitGrade)        {            return;        }        else        {            // set eit grade equals dvb_grade.            android.provider.Settings.System.putInt(mContext.getContentResolver(), "eit_grade", dvbGrade);        }    }    }